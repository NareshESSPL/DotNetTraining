@page
@model InvoiceApp.Pages.Invoices.EditModel
@{
}

<h2 class="text-center-mb-3"> Edit Invoices</h2>

<form method="post">
	<div class="row g-2 mb-3">
		<div class="col-lg-6">

			<div class="card h-100">
				<div class="card-header">
					Invoice Details
				</div>

				<div class="card-body">

					<div class="row mb-3">
						<label class="col-sm-4 col-form-label">Invoice ID</label>
						<div class="col-sm-8">
							<input type="text" class="form-control" readonly value="@Model.Invoice.Id">
						</div>

					</div>

					<div class="row mb-3">
						<label class="col-sm-4 col-form-label">Invoice No</label>
						<div class="col-sm-8">
							<input type="text" class="form-control" asp-for="InvoiceDTO.Number" />
							<span asp-validation-for="InvoiceDTO.Number" class="text-danger"></span>
						</div>

					</div>

					<div class="row mb-3">

						<label class="col-sm-4 col-form-label">Payment Status</label>
						<div class="col-sm-8">
							<select class="form-select" asp-for="InvoiceDTO.Status">
								<option value="">Select Status</option>
								<option value="Paid">Paid</option>
								<option value="Unpaid">Unpaid</option>
								<option value="Overdue">Overdue</option>
							</select>
							<span asp-validation-for="InvoiceDTO.Number" class="text-danger"></span>
						</div>

					</div>

					<div class="row mb-3">
						<label class="col-sm-4 col-form-label">Issue Date</label>
						<div class="col-sm-8">
							<input type="date" class="form-control" asp-for="InvoiceDTO.IssueDate" />
							<span asp-validation-for="InvoiceDTO.IssueDate" class="text-danger"></span>
						</div>

					</div>

					<div class="row mb-3">
						<label class="col-sm-4 col-form-label">Due Date</label>
						<div class="col-sm-8">
							<input type="date" class="form-control" asp-for="InvoiceDTO.DueDate" />
							<span asp-validation-for="InvoiceDTO.DueDate" class="text-danger"></span>
						</div>

					</div>

				</div>
			</div>

		</div>
		<div class="col-lg-6">

			<div class="card h-100">
				<div class="card-header">
					Client Details
				</div>

				<div class="card-body">

					<div class="row mb-3">
						<label class="col-sm-4 col-form-label">Client</label>
						<div class="col-sm-8">
							<input class="form-control" asp-for="InvoiceDTO.ClientName">
							<span asp-validation-for="InvoiceDTO.ClientName" class="text-danger"></span>
						</div>
					</div>


					<div class="row mb-3">
						<label class="col-sm-4 col-form-label">Email</label>
						<div class="col-sm-8">
							<input class="form-control" asp-for="InvoiceDTO.Email">
							<span asp-validation-for="InvoiceDTO.Email" class="text-danger"></span>
						</div>
					</div>


					<div class="row mb-3">
						<label class="col-sm-4 col-form-label">Phone</label>
						<div class="col-sm-8">
							<input class="form-control" asp-for="InvoiceDTO.Phone" />
							<span asp-validation-for="InvoiceDTO.Phone" class="text-danger"></span>
						</div>
					</div>



					<div class="row mb-3">
						<lrabel class="col-sm-4 col-form-label">Address</lrabel>
						<div class="col-sm-8">
							<input class="form-control" asp-for="InvoiceDTO.Address" />
							<span asp-validation-for="InvoiceDTO.Address" class="text-danger"></span>
						</div>
					</div>

				</div>
			</div>



		</div>
	</div>

	<div class="card-mb-3">
		<div class="card-header">Service Details</div>

		<div class="card-body">

			<div class="row g-2">

				<div class="col-lg-6">
					<label class="form-label">Service</label>
					<input class="form-control" asp-for="InvoiceDTO.Services">
					<span asp-validation-for="InvoiceDTO.Services" class="text-danger"></span>
				</div>

				<div class="col-lg-2 col-sm-4">
					<label class="form-label">Quantity</label>
					<input class="form-control" asp-for="InvoiceDTO.Quantity" id="quantityInput" oninput="updateTotalPrice()">
					<span asp-validation-for="InvoiceDTO.Quantity" class="text-danger"></span>
				</div>

				<div class="col-lg-2 col-sm-4">
					<label class="form-label">Unit Price</label>
					<input class="form-control" asp-for="InvoiceDTO.UnitPrice" id="unitPriceInput" oninput="updateTotalPrice()">
					<span asp-validation-for="InvoiceDTO.UnitPrice" class="text-danger"></span>
				</div>

				<div class="col-lg-2 col-sm-4">
					<label class="form-label">Total Price</label>
					<input class="form-control" disabled id="totalPriceInput">
				</div>


			</div>

		</div>
	</div>
	<button type="submit" class="btn btn-primary me-2">Submit</button>
	<a class="btn btn-outline-primary" asp-page="/Invoices/Index" role="button">Cancel</a>
</form>

<script>
	function  updateTotalPrice()
	{
		let quantity= document.getElementById("quantityInput").value;
		let unitPrice = document.getElementById("unitPriceInput").value;

		if(isNaN(quantity || isNaN(unitPrice)))
		{
			document.getElementById("totalPriceInput").value = 0 ;
		}else{
			let totalPrice= quantity * unitPrice;
			document.getElementById("totalPriceInput").value = totalPrice;
		}
	}

	  updateTotalPrice();

</script>